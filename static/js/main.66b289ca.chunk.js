(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1165:function(t,i,e){},1167:function(t,i,e){"use strict";e.r(i);var s=e(80),r=e.n(s),a=e(474),n=e.n(a),o=(e(480),e(63)),h=e(64),l=e(66),c=e(65),u=e(67),d=e(27),p=e.n(d),y=e(25),g=e.n(y),k=g.a.max([window.innerWidth-6,1200]),f=g.a.max([window.innerHeight-6,800]),m=function(t){return"".concat("https://tscizzle.github.io/ski-game").concat(t)},v=function(t,i){return Math.atan2(Math.sin(t-i),Math.cos(t-i))},S=function(t){function i(){return Object(o.a)(this,i),Object(l.a)(this,Object(c.a)(i).call(this,"MountainSlope"))}return Object(u.a)(i,t),Object(h.a)(i,[{key:"preload",value:function(){this.load.image("arrows",m("/gameAssets/images/racingArrows.png")),this.load.image("skiBody",m("/gameAssets/images/skiBody.png")),this.load.image("leftSki",m("/gameAssets/images/leftSki.png")),this.load.image("rightSki",m("/gameAssets/images/rightSki.png")),this.load.image("snowParticle",m("/gameAssets/images/snowParticle.png")),this.load.image("crashedSkis",m("/gameAssets/images/crashedSkis.png"))}},{key:"create",value:function(){this.slopeSteepness=Math.PI/6,this.slopeDirection=0,this.gravityAccelerationConstant=500,this.previousAngularVelocity=0,this.previousTurnDirection=null,this.previousTiltAmount=0,this.previousTiltDirection=null,this.previousBackCorner=null,this.isCrashed=!1,this.refDistance=g.a.max([k,f])/2+100,this.refArrows=[this.add.sprite(0,0,"arrows"),this.add.sprite(0,this.refDistance,"arrows"),this.add.sprite(this.refDistance,0,"arrows"),this.add.sprite(this.refDistance,this.refDistance,"arrows")],g.a.each(this.refArrows,function(t){return t.setScale(.75)}),this.skiBody=this.add.sprite(0,0,"skiBody"),this.leftSki=this.add.sprite(-40,0,"leftSki"),this.rightSki=this.add.sprite(40,0,"rightSki"),this.skiPlayer=this.add.container(this.refDistance/2,this.refDistance/2,[this.skiBody,this.leftSki,this.rightSki]),this.skiPlayer.setScale(.25),this.physics.world.enable(this.skiPlayer),this.edgeSnowParticles=this.add.particles("snowParticle"),this.edgeSnowEmitter=this.edgeSnowParticles.createEmitter({radial:!1,lifespan:375,quantity:5,angle:{min:-100,max:-80},blendMode:"ADD",on:!1}),this.cameras.main.setBackgroundColor(15790320),this.cameras.main.startFollow(this.skiPlayer),this.skiTurningCursors=this.input.keyboard.createCursorKeys(),this.skiTiltCursors=this.input.keyboard.addKeys({up:p.a.Input.Keyboard.KeyCodes.W,down:p.a.Input.Keyboard.KeyCodes.S,left:p.a.Input.Keyboard.KeyCodes.A,right:p.a.Input.Keyboard.KeyCodes.D})}},{key:"update",value:function(){this.drawReferenceObjects(),this.isCrashed||(this.controlRotation(),this.controlTilt());var t={x:0,y:0};if(!this.isCrashed){var i=Math.sin(this.slopeSteepness),e=g.a.isNull(this.previousTiltDirection)?this.slopeDirection:this.skiPlayer.rotation,s=Math.cos(e-this.slopeDirection),r=this.gravityAccelerationConstant*i*s;t={x:Math.sin(e)*r,y:-Math.cos(e)*r}}var a=Math.atan2(this.skiPlayer.body.velocity.x,-this.skiPlayer.body.velocity.y),n=this.skiPlayer.rotation-Math.PI/2,o=this.skiPlayer.rotation+Math.PI/2,h=Math.abs(v(n,a))<Math.abs(v(o,a))?n:o,l=Math.cos(a-h),c=this.skiPlayer.body.speed*l,u=-c*(.1+.9*this.previousTiltAmount),d=Math.sin(h)*u,y=-Math.cos(h)*u,k={x:t.x+d,y:t.y+y};this.skiPlayer.body.setAcceleration(k.x,k.y);var f=1.1*c,m=Math.abs(u),S=m>=100,w=this.edgeSnowEmitter.on;if(S){w||this.edgeSnowEmitter.start();var b=h===n?"left":"right",D="left"===b?this.skiBody.getBottomLeft(null,!0):this.skiBody.getBottomRight(null,!0),A="left"===b?this.skiBody.getTopLeft(null,!0):this.skiBody.getTopRight(null,!0),T=new p.a.Geom.Line(D.x,D.y,A.x,A.y);this.edgeSnowEmitter.setEmitZone({source:T,type:"random"}),this.edgeSnowEmitter.setSpeed(f);var P,B,M=200*Math.floor(m/200);if(M>=1e3?(P=0,B=.25):(P=50*(1-M/1e3),B=M/1e3*.2+.05),P!==this.edgeSnowEmitter.frequency&&(this.edgeSnowEmitter.setFrequency(P),this.edgeSnowEmitter.setScale({start:B,end:0})),this.previousBackCorner){var C=this.add.graphics();C.setDefaultStyles({lineStyle:{width:3,color:13421772}});var O=C.lineBetween(this.previousBackCorner.x,this.previousBackCorner.y,D.x,D.y);this.add.tween({targets:[O],duration:1e3,alpha:0,onComplete:function(){O.destroy(),C.destroy()}})}this.previousBackCorner=D,b===this.previousTiltDirection&&this.crash()}else w&&this.edgeSnowEmitter.stop(),this.previousBackCorner=null}},{key:"controlRotation",value:function(){var t=Math.PI/70,i=Math.PI/1e3,e=g.a.min([this.previousAngularVelocity+i,t]);this.skiTurningCursors.left.isDown?("right"!==this.previousTurnDirection?(this.skiPlayer.rotation-=e,this.previousAngularVelocity=e):this.previousAngularVelocity=0,this.previousTurnDirection="left"):this.skiTurningCursors.right.isDown?("left"!==this.previousTurnDirection?(this.skiPlayer.rotation+=e,this.previousAngularVelocity=e):this.previousAngularVelocity=0,this.previousTurnDirection="right"):(this.previousAngularVelocity=0,this.previousTurnDirection=null)}},{key:"controlTilt",value:function(){var t,i=this.previousTiltDirection;this.skiTiltCursors.left.isDown?"right"!==this.previousTiltDirection?(t=g.a.min([this.previousTiltAmount+.05,1]),i="left"):t=g.a.max([this.previousTiltAmount-.05,0]):this.skiTiltCursors.right.isDown&&"left"!==this.previousTiltDirection?(t=g.a.min([this.previousTiltAmount+.05,1]),i="right"):t=g.a.max([this.previousTiltAmount-.05,0]),0===t&&(i=null);var e=1*(1-t)+.8*t;this.leftSki.setScale(e,1),this.rightSki.setScale(e,1),this.previousTiltAmount=t,this.previousTiltDirection=i}},{key:"drawReferenceObjects",value:function(){var t=Math.floor(this.skiPlayer.y/this.refDistance)*this.refDistance,i=Math.floor(this.skiPlayer.x/this.refDistance)*this.refDistance;if(this.refArrows[0].x!==i||this.refArrows[0].y!==t){var e=i+this.refDistance,s=t+this.refDistance;this.refArrows[0].setPosition(i,t),this.refArrows[1].setPosition(i,s),this.refArrows[2].setPosition(e,t),this.refArrows[3].setPosition(e,s)}}},{key:"crash",value:function(){this.isCrashed=!0,this.skiPlayer.body.setVelocity(0),this.skiPlayer.body.setAcceleration(0),this.leftSki.destroy(),this.rightSki.destroy(),this.crashedSkis=this.add.sprite(0,0,"crashedSkis"),this.skiPlayer.add(this.crashedSkis),this.edgeSnowEmitter.setScale({start:1,end:0}),this.edgeSnowEmitter.setAngle({min:0,max:360}),this.edgeSnowEmitter.setLifespan(750),this.edgeSnowEmitter.setSpeed(150),this.edgeSnowEmitter.explode(30,0,0),this.cameras.main.shake(300,.07),this.events.emit("crash")}}]),i}(p.a.Scene),w=function(t){function i(){return Object(o.a)(this,i),Object(l.a)(this,Object(c.a)(i).call(this,{key:"SkiTiltDisplay",active:!0}))}return Object(u.a)(i,t),Object(h.a)(i,[{key:"preload",value:function(){this.load.image("leftSkiBack",m("/gameAssets/images/leftSkiBack.png")),this.load.image("rightSkiBack",m("/gameAssets/images/rightSkiBack.png"))}},{key:"create",value:function(){var t=k-45-120,i=f-45-55,e=this.add.graphics();e.setDefaultStyles({lineStyle:{width:7,color:7829367},fillStyle:{color:14540253}}),e.strokeRect(t-120,i-55,240,110),e.fillRect(t-120,i-55,240,110),this.leftSki=this.add.sprite(-220,0,"leftSkiBack"),this.rightSki=this.add.sprite(220,0,"rightSkiBack"),this.skis=this.add.container(t,i,[this.leftSki,this.rightSki]),this.skis.setScale(.23)}},{key:"update",value:function(){var t=this.scene.get("MountainSlope"),i=t.previousTiltAmount,e=t.previousTiltDirection,s=(0*(1-i)+Math.PI/4*i)*("left"===e?-1:1);this.leftSki.rotation=s,this.rightSki.rotation=s}}]),i}(p.a.Scene),b=function(t){function i(){return Object(o.a)(this,i),Object(l.a)(this,Object(c.a)(i).call(this,{key:"ResetButton",active:!0}))}return Object(u.a)(i,t),Object(h.a)(i,[{key:"create",value:function(){var t=this,i=k/2,e=f-45-80;this.scene.get("MountainSlope").events.on("crash",function(){var s=t.add.graphics();s.setDefaultStyles({lineStyle:{width:8,color:4500036},fillStyle:{color:8969608}});var r=[i-160,e-80,320,160,5];s.strokeRoundedRect.apply(s,r),s.fillRoundedRect.apply(s,r),t.add.text(i,e,"Lift Back Up",{color:"#228822",fontSize:"28px",fontStyle:"bold"}).setOrigin(.5,.5);var a=t.add.zone(i,e,320,160);a.setInteractive({useHandCursor:!0}),a.on("pointerup",function(){g.a.each(t.scene.manager.scenes,function(t){return t.scene.restart()})})})}}]),i}(p.a.Scene),D=(e(1165),function(t){function i(){var t,e;Object(o.a)(this,i);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=Object(l.a)(this,(t=Object(c.a)(i)).call.apply(t,[this].concat(r)))).containerId="game-container",e}return Object(u.a)(i,t),Object(h.a)(i,[{key:"componentDidMount",value:function(){!function(t){var i=t.parent,e={width:k,height:f,scene:[S,w,b],physics:{default:"arcade"},type:p.a.AUTO,parent:i};new p.a.Game(e)}({parent:this.containerId})}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{id:this.containerId}))}}]),i}(s.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},475:function(t,i,e){t.exports=e(1167)},480:function(t,i,e){}},[[475,2,1]]]);
//# sourceMappingURL=main.66b289ca.chunk.js.map